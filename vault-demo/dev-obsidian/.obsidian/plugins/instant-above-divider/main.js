/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => InstantAboveDividerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// outline-view.ts
var import_obsidian2 = require("obsidian");

// outline-service.ts
var import_obsidian = require("obsidian");

// outline-parser.ts
var OutlineParser = class {
  constructor(maxContentLength = 10) {
    this.maxContentLength = maxContentLength;
  }
  /**
   * 解析笔记内容，提取标题和分隔线信息
   */
  parseContent(content) {
    const lines = content.split("\n");
    const headings = [];
    const dividers = [];
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const headingMatch = line.match(/^(#{1,6})\s+(.+)$/);
      if (headingMatch) {
        const level = headingMatch[1].length;
        const title = headingMatch[2].trim();
        headings.push({
          level,
          title,
          line: i,
          ch: 0
        });
        continue;
      }
      if (line.trim() === "---") {
        const content2 = this.extractDividerContent(lines, i);
        if (content2) {
          const level = this.calculateDividerLevel(lines, i);
          dividers.push({
            line: i,
            ch: 0,
            title: content2,
            level
            // 添加层级信息
          });
        }
      }
    }
    return {
      headings,
      dividers,
      outlineItems: []
    };
  }
  /**
   * 提取分隔线后的内容
   */
  extractDividerContent(lines, dividerIndex) {
    for (let i = dividerIndex + 1; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line === "")
        continue;
      if (line === "---")
        break;
      if (line.match(/^#{1,6}\s/))
        break;
      return this.getFirstNValidChars(line);
    }
    return "";
  }
  /**
   * 获取前N个有效字符
   */
  getFirstNValidChars(text) {
    const trimmed = text.trim();
    if (trimmed.length <= this.maxContentLength) {
      return trimmed;
    }
    return trimmed.substring(0, this.maxContentLength);
  }
  /**
   * 验证内容是否有效
   */
  isValidContent(content) {
    return content.trim().length > 0;
  }
  /**
   * 计算分隔线的层级
   * 分隔线的层级 = 最近标题的层级 + 1
   * 如果没有标题，则为1级
   */
  calculateDividerLevel(lines, dividerIndex) {
    for (let i = dividerIndex - 1; i >= 0; i--) {
      const line = lines[i].trim();
      if (line === "")
        continue;
      if (line === "---")
        continue;
      const headingMatch = line.match(/^(#{1,6})\s+(.+)$/);
      if (headingMatch) {
        const level = headingMatch[1].length;
        return level + 1;
      }
    }
    return 1;
  }
  /**
   * 生成唯一ID
   */
  generateId(type, line) {
    return `${type}-${line}-${Date.now()}`;
  }
};

// outline-service.ts
var OutlineService = class {
  constructor(app, maxContentLength = 10) {
    this.app = app;
    this.parser = new OutlineParser(maxContentLength);
  }
  /**
   * 生成大纲数据
   */
  generateOutline(content) {
    if (!content || content.trim() === "") {
      return [];
    }
    const parsedContent = this.parser.parseContent(content);
    const outlineItems = [];
    parsedContent.headings.forEach((heading) => {
      outlineItems.push({
        id: this.parser.generateId("heading", heading.line),
        type: "heading",
        level: heading.level,
        title: heading.title,
        line: heading.line,
        ch: heading.ch,
        isExpanded: true
      });
    });
    parsedContent.dividers.forEach((divider) => {
      if (this.parser.isValidContent(divider.title)) {
        outlineItems.push({
          id: this.parser.generateId("divider", divider.line),
          type: "divider",
          level: divider.level,
          // 使用计算出的层级
          title: divider.title,
          line: divider.line,
          ch: divider.ch,
          isExpanded: true
        });
      }
    });
    outlineItems.sort((a, b) => a.line - b.line);
    return outlineItems;
  }
  /**
   * 获取当前笔记的大纲
   */
  getOutlineForCurrentNote() {
    console.log("OutlineService: \u5F00\u59CB\u83B7\u53D6\u5F53\u524D\u7B14\u8BB0\u5927\u7EB2");
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!activeView) {
      console.log("OutlineService: \u6CA1\u6709\u627E\u5230\u6D3B\u52A8\u7684 Markdown \u89C6\u56FE");
      return [];
    }
    const editor = activeView.editor;
    const content = editor.getValue();
    console.log("OutlineService: \u83B7\u53D6\u5230\u5185\u5BB9\u957F\u5EA6:", content.length);
    console.log(
      "OutlineService: \u5185\u5BB9\u9884\u89C8:",
      content.substring(0, 100) + "..."
    );
    const outline = this.generateOutline(content);
    console.log("OutlineService: \u751F\u6210\u5927\u7EB2\u9879\u76EE\u6570\u91CF:", outline.length);
    outline.forEach((item, index) => {
      console.log(
        `OutlineService: \u9879\u76EE ${index + 1}: [${item.type}] ${item.title} (\u5C42\u7EA7: ${item.level}, \u884C: ${item.line})`
      );
    });
    return outline;
  }
  /**
   * 导航到指定位置
   */
  navigateToPosition(editor, line, ch) {
    try {
      console.log("OutlineService: \u5F00\u59CB\u5BFC\u822A\u5230\u4F4D\u7F6E:", line, ch);
      const lineCount = editor.lineCount();
      if (line < 0 || line >= lineCount) {
        console.error(
          "OutlineService: \u65E0\u6548\u7684\u884C\u53F7:",
          line,
          "\u603B\u884C\u6570:",
          lineCount
        );
        return;
      }
      const lineContent = editor.getLine(line);
      if (lineContent && ch > lineContent.length) {
        ch = lineContent.length;
        console.log("OutlineService: \u5217\u53F7\u8C03\u6574\u5230\u884C\u5C3E:", ch);
      }
      editor.setCursor(line, ch);
      console.log("OutlineService: \u5149\u6807\u4F4D\u7F6E\u5DF2\u8BBE\u7F6E\u5230:", line, ch);
      editor.focus();
      console.log("OutlineService: \u7F16\u8F91\u5668\u5DF2\u805A\u7126");
      editor.scrollIntoView(
        { from: { line, ch }, to: { line, ch } },
        true
      );
      console.log("OutlineService: \u89C6\u56FE\u5DF2\u6EDA\u52A8\u5230\u76EE\u6807\u4F4D\u7F6E");
    } catch (error) {
      console.error("OutlineService: \u5BFC\u822A\u5931\u8D25:", error);
    }
  }
  /**
   * 导航到大纲项目
   */
  navigateToOutlineItem(editor, item) {
    console.log(
      "OutlineService: \u5BFC\u822A\u5230\u5927\u7EB2\u9879\u76EE:",
      item.title,
      "\u7C7B\u578B:",
      item.type
    );
    let targetLine = item.line;
    let targetCh = item.ch;
    if (item.type === "heading") {
      const lineContent = editor.getLine(item.line);
      if (lineContent) {
        const match = lineContent.match(/^(#{1,6})\s+(.+)$/);
        if (match) {
          targetCh = match[1].length + 1;
          console.log(
            "OutlineService: \u6807\u9898\u5149\u6807\u4F4D\u7F6E\u8C03\u6574\u5230:",
            targetCh
          );
        }
      }
    } else if (item.type === "divider") {
      const lines = editor.getValue().split("\n");
      const content = this.parser.extractDividerContent(lines, item.line);
      if (content) {
        for (let i = item.line + 1; i < lines.length; i++) {
          const line = lines[i].trim();
          if (line && line !== "---" && !line.match(/^#{1,6}\s/)) {
            targetLine = i;
            targetCh = 0;
            console.log(
              "OutlineService: \u5206\u9694\u7EBF\u5149\u6807\u4F4D\u7F6E\u8C03\u6574\u5230\u884C:",
              targetLine
            );
            break;
          }
        }
      }
    }
    this.navigateToPosition(editor, targetLine, targetCh);
  }
};

// outline-view.ts
var OUTLINE_VIEW_TYPE = "outline-view";
var OutlineView = class extends import_obsidian2.ItemView {
  constructor(leaf, app, maxContentLength = 10) {
    super(leaf);
    this.outlineItems = [];
    this.outlineService = new OutlineService(app, maxContentLength);
  }
  getViewType() {
    return OUTLINE_VIEW_TYPE;
  }
  getDisplayText() {
    return "Outline";
  }
  getIcon() {
    return "list-tree";
  }
  async onOpen() {
    const container = this.contentEl;
    container.empty();
    this.updateOutline();
  }
  /**
   * 渲染大纲界面
   */
  render(outlineItems) {
    console.log(
      "OutlineView: \u5F00\u59CB\u6E32\u67D3\u5927\u7EB2\uFF0C\u9879\u76EE\u6570\u91CF:",
      (outlineItems == null ? void 0 : outlineItems.length) || this.outlineItems.length
    );
    if (outlineItems) {
      this.outlineItems = outlineItems;
    }
    const container = this.contentEl;
    const contentEl = container.querySelector(".outline-content");
    if (contentEl) {
      contentEl.remove();
    }
    const contentContainer = container.createDiv("outline-content");
    if (this.outlineItems.length === 0) {
      contentContainer.createEl("p", {
        text: "No outline content found. Add headings (# ## ###) or dividers (---) to your note.",
        cls: "outline-empty"
      });
      console.log("OutlineView: \u6E32\u67D3\u7A7A\u5185\u5BB9\u63D0\u793A");
      return;
    }
    this.outlineItems.forEach((item) => {
      this.renderOutlineItem(contentContainer, item);
    });
  }
  /**
   * 渲染单个大纲项目
   */
  renderOutlineItem(container, item) {
    const itemEl = container.createDiv("outline-item");
    itemEl.setAttribute("data-type", item.type);
    itemEl.setAttribute("data-level", item.level.toString());
    const iconEl = itemEl.createSpan("outline-item-icon");
    if (item.type === "heading") {
      iconEl.innerHTML = `H${item.level}`;
    } else {
      iconEl.innerHTML = "\u2796";
    }
    const titleEl = itemEl.createSpan("outline-item-title");
    titleEl.textContent = item.title;
    itemEl.addEventListener("click", () => {
      this.handleItemClick(item);
    });
  }
  /**
   * 处理项目点击
   */
  handleItemClick(item) {
    console.log("OutlineView: \u70B9\u51FB\u5927\u7EB2\u9879\u76EE:", item.title, "\u884C:", item.line);
    const markdownLeaves = this.app.workspace.getLeavesOfType("markdown");
    console.log(
      "OutlineView: \u627E\u5230 Markdown \u89C6\u56FE\u6570\u91CF:",
      markdownLeaves.length
    );
    if (markdownLeaves.length === 0) {
      console.log("OutlineView: \u6CA1\u6709\u627E\u5230\u4EFB\u4F55 Markdown \u89C6\u56FE");
      return;
    }
    const markdownView = markdownLeaves[0].view;
    if (!markdownView) {
      console.log("OutlineView: Markdown \u89C6\u56FE\u65E0\u6548");
      return;
    }
    this.app.workspace.setActiveLeaf(markdownLeaves[0], { focus: true });
    const editor = markdownView.editor;
    this.outlineService.navigateToOutlineItem(editor, item);
  }
  /**
   * 显示大纲
   */
  show() {
    this.render();
  }
  /**
   * 隐藏大纲
   */
  hide() {
  }
  /**
   * 更新大纲内容
   */
  updateOutline() {
    console.log("OutlineView: \u5F00\u59CB\u66F4\u65B0\u5927\u7EB2");
    const outlineItems = this.outlineService.getOutlineForCurrentNote();
    console.log(
      "OutlineView: \u83B7\u53D6\u5230\u5927\u7EB2\u9879\u76EE\u6570\u91CF:",
      outlineItems.length,
      outlineItems
    );
    this.outlineItems = [];
    this.render(outlineItems);
    console.log("OutlineView: \u5927\u7EB2\u66F4\u65B0\u5B8C\u6210");
  }
  /**
   * 更新配置
   */
  updateConfig(maxContentLength) {
    console.log("OutlineView: \u5F00\u59CB\u66F4\u65B0\u914D\u7F6E");
    this.outlineService = new OutlineService(this.app, maxContentLength);
    console.log(
      "OutlineView: \u914D\u7F6E\u66F4\u65B0\u5B8C\u6210\uFF0CmaxContentLength:",
      maxContentLength
    );
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  respectHeadings: true,
  showOutlineInSidebar: true,
  maxContentLength: 10
};
var InstantAboveDividerPlugin = class extends import_obsidian3.Plugin {
  constructor() {
    super(...arguments);
    this.debounceTimer = null;
  }
  // 检测 frontmatter 并返回其结束位置
  getFrontmatterEndLine(lines) {
    if (lines.length < 2 || lines[0] !== "---") {
      return -1;
    }
    for (let i = 1; i < lines.length; i++) {
      if (lines[i] === "---") {
        return i;
      }
    }
    return -1;
  }
  async onload() {
    await this.loadSettings();
    this.registerView(
      OUTLINE_VIEW_TYPE,
      (leaf) => new OutlineView(leaf, this.app, this.settings.maxContentLength)
    );
    if (this.settings.showOutlineInSidebar) {
      setTimeout(() => {
        this.showOutline();
      }, 100);
    }
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        if (this.debounceTimer) {
          clearTimeout(this.debounceTimer);
        }
        this.debounceTimer = setTimeout(() => {
          console.log("Plugin: \u6587\u4EF6\u6253\u5F00\u4E8B\u4EF6\u89E6\u53D1");
          this.updateOutlineView();
        }, 500);
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-change", () => {
        if (this.debounceTimer) {
          clearTimeout(this.debounceTimer);
        }
        this.debounceTimer = setTimeout(() => {
          console.log("Plugin: \u7F16\u8F91\u5668\u53D8\u5316\u4E8B\u4EF6\u89E6\u53D1");
          this.updateOutlineView();
        }, 500);
      })
    );
    this.addCommand({
      id: "add-section",
      name: "Add Section",
      editorCallback: (editor) => {
        const content = editor.getValue();
        const formatterEndLine = this.getFrontmatterEndLine(
          content.split("\n")
        );
        let insertLine = formatterEndLine + 1;
        const cursorPos = editor.getCursor();
        const lines = content.split("\n");
        if (this.settings.respectHeadings) {
          for (let i = cursorPos.line - 1; i >= 0; i--) {
            if (lines[i].match(/^#{1,6}\s/)) {
              insertLine = i + 1;
              break;
            }
          }
        }
        if (insertLine === 0) {
          editor.setCursor(0, 0);
          const newContent2 = "\n\n---\n\n";
          editor.replaceRange(newContent2, {
            line: insertLine,
            ch: 0
          });
          return;
        }
        const newContent = "\n\n\n---\n";
        editor.replaceRange(newContent, { line: insertLine, ch: 0 });
        editor.setCursor(insertLine + 1, 0);
      }
    });
    this.addSettingTab(new InstantAboveDividerSettingTab(this.app, this));
  }
  /**
   * 切换大纲视图显示/隐藏
   */
  showOutline() {
    var _a;
    try {
      const existingLeaf = this.app.workspace.getLeavesOfType(OUTLINE_VIEW_TYPE);
      if (existingLeaf.length > 0) {
        const leaf = existingLeaf[0];
        if ((_a = leaf.getViewState().state) == null ? void 0 : _a.active) {
          console.log("Plugin: \u9690\u85CF\u5927\u7EB2\u89C6\u56FE");
          leaf.detach();
        } else {
          console.log("Plugin: \u6FC0\u6D3B\u5927\u7EB2\u89C6\u56FE");
          this.app.workspace.revealLeaf(leaf);
        }
      } else {
        console.log("Plugin: \u521B\u5EFA\u65B0\u7684\u5927\u7EB2\u89C6\u56FE");
        let leaf = this.app.workspace.getRightLeaf(false);
        if (!leaf) {
          leaf = this.app.workspace.getLeftLeaf(false);
        }
        if (!leaf) {
          leaf = this.app.workspace.getRightLeaf(true);
        }
        if (leaf) {
          leaf.setViewState({
            type: OUTLINE_VIEW_TYPE,
            active: true
          });
          this.app.workspace.revealLeaf(leaf);
          console.log("Plugin: \u5927\u7EB2\u89C6\u56FE\u521B\u5EFA\u6210\u529F");
        } else {
          console.error(
            "Plugin: \u65E0\u6CD5\u521B\u5EFA\u5927\u7EB2\u89C6\u56FE\uFF0C\u5DE5\u4F5C\u533A\u53EF\u80FD\u672A\u5B8C\u5168\u521D\u59CB\u5316"
          );
        }
      }
    } catch (error) {
      console.error("Plugin: \u663E\u793A\u5927\u7EB2\u89C6\u56FE\u65F6\u53D1\u751F\u9519\u8BEF:", error);
    }
  }
  /**
   * 更新所有大纲视图
   */
  updateOutlineView() {
    console.log("Plugin: \u5F00\u59CB\u66F4\u65B0\u5927\u7EB2\u89C6\u56FE");
    const outlineLeaves = this.app.workspace.getLeavesOfType(OUTLINE_VIEW_TYPE);
    console.log("Plugin: \u627E\u5230\u5927\u7EB2\u89C6\u56FE\u6570\u91CF:", outlineLeaves.length);
    const leaf = outlineLeaves[0];
    const view = leaf.view;
    if (view && typeof view.updateOutline === "function") {
      console.log(`Plugin: \u66F4\u65B0\u5927\u7EB2\u89C6\u56FE`);
      view.updateOutline();
    }
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  updateOutlineConfig() {
    const outlineLeaves = this.app.workspace.getLeavesOfType(OUTLINE_VIEW_TYPE);
    const leaf = outlineLeaves[0];
    const view = leaf.view;
    if (view && typeof view.updateConfig === "function") {
      console.log("Plugin: \u66F4\u65B0\u5927\u7EB2\u89C6\u56FE\u914D\u7F6E");
      view.updateConfig(this.settings.maxContentLength);
    }
    if (this.debounceTimer) {
      clearTimeout(this.debounceTimer);
    }
    this.debounceTimer = setTimeout(() => {
      console.log("Plugin: \u914D\u7F6E\u66F4\u65B0\u5BFC\u81F4\u5927\u7EB2\u89C6\u56FE\u66F4\u65B0");
      this.updateOutlineView();
    }, 500);
  }
};
var InstantAboveDividerSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian3.Setting(containerEl).setName("Respect Headings").setDesc(
      "When enabled, new sections will be inserted above the nearest heading"
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.respectHeadings).onChange(async (value) => {
        this.plugin.settings.respectHeadings = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Show Outline in Sidebar").setDesc(
      "When enabled, the outline view will be automatically opened when the plugin loads"
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.showOutlineInSidebar).onChange(async (value) => {
        this.plugin.settings.showOutlineInSidebar = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Max Content Length").setDesc(
      "Maximum number of characters to extract from divider content (default: 10)"
    ).addText(
      (text) => text.setPlaceholder("10").setValue(this.plugin.settings.maxContentLength.toString()).onChange(async (value) => {
        const numValue = parseInt(value) || 10;
        this.plugin.settings.maxContentLength = numValue;
        await this.plugin.saveSettings();
        this.plugin.updateOutlineConfig();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJvdXRsaW5lLXZpZXcudHMiLCAib3V0bGluZS1zZXJ2aWNlLnRzIiwgIm91dGxpbmUtcGFyc2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xuXHRBcHAsXG5cdEVkaXRvcixcblx0UGx1Z2luLFxuXHRQbHVnaW5TZXR0aW5nVGFiLFxuXHRTZXR0aW5nLFxuXHRXb3Jrc3BhY2VMZWFmLFxufSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IE91dGxpbmVWaWV3LCBPVVRMSU5FX1ZJRVdfVFlQRSB9IGZyb20gXCIuL291dGxpbmUtdmlld1wiO1xuXG5pbnRlcmZhY2UgUGx1Z2luU2V0dGluZ3Mge1xuXHRyZXNwZWN0SGVhZGluZ3M6IGJvb2xlYW47XG5cdHNob3dPdXRsaW5lSW5TaWRlYmFyOiBib29sZWFuO1xuXHRtYXhDb250ZW50TGVuZ3RoOiBudW1iZXI7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFBsdWdpblNldHRpbmdzID0ge1xuXHRyZXNwZWN0SGVhZGluZ3M6IHRydWUsXG5cdHNob3dPdXRsaW5lSW5TaWRlYmFyOiB0cnVlLFxuXHRtYXhDb250ZW50TGVuZ3RoOiAxMCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluc3RhbnRBYm92ZURpdmlkZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogUGx1Z2luU2V0dGluZ3M7XG5cdHByaXZhdGUgZGVib3VuY2VUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcblxuXHQvLyBcdTY4QzBcdTZENEIgZnJvbnRtYXR0ZXIgXHU1RTc2XHU4RkQ0XHU1NkRFXHU1MTc2XHU3RUQzXHU2NzVGXHU0RjREXHU3RjZFXG5cdHByaXZhdGUgZ2V0RnJvbnRtYXR0ZXJFbmRMaW5lKGxpbmVzOiBzdHJpbmdbXSk6IG51bWJlciB7XG5cdFx0aWYgKGxpbmVzLmxlbmd0aCA8IDIgfHwgbGluZXNbMF0gIT09IFwiLS0tXCIpIHtcblx0XHRcdHJldHVybiAtMTtcblx0XHR9XG5cblx0XHQvLyBcdTRFQ0VcdTdCMkNcdTRFOENcdTg4NENcdTVGMDBcdTU5Q0JcdTVCRkJcdTYyN0VcdTdFRDNcdTY3NUZcdTc2ODQgXCItLS1cIlxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChsaW5lc1tpXSA9PT0gXCItLS1cIikge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHR9XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBcdTZDRThcdTUxOEMgT3V0bGluZSBWaWV3XG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoXG5cdFx0XHRPVVRMSU5FX1ZJRVdfVFlQRSxcblx0XHRcdChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PlxuXHRcdFx0XHRuZXcgT3V0bGluZVZpZXcobGVhZiwgdGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MubWF4Q29udGVudExlbmd0aClcblx0XHQpO1xuXG5cdFx0Ly8gXHU1OTgyXHU2NzlDXHU4QkJFXHU3RjZFXHU0RTJEXHU1NDJGXHU3NTI4XHU0RTg2XHU1OTI3XHU3RUIyXHU4OUM2XHU1NkZFXHVGRjBDXHU1MjE5XHU1RUY2XHU4RkRGXHU2MjUzXHU1RjAwXHVGRjA4XHU3QjQ5XHU1Rjg1XHU1REU1XHU0RjVDXHU1MzNBXHU1MjFEXHU1OUNCXHU1MzE2XHVGRjA5XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd091dGxpbmVJblNpZGViYXIpIHtcblx0XHRcdC8vIFx1NUVGNlx1OEZERlx1NjI2N1x1ODg0Q1x1RkYwQ1x1Nzg2RVx1NEZERFx1NURFNVx1NEY1Q1x1NTMzQVx1NUI4Q1x1NTE2OFx1NTIxRFx1NTlDQlx1NTMxNlxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd091dGxpbmUoKTtcblx0XHRcdH0sIDEwMCk7XG5cdFx0fVxuXG5cdFx0Ly8gXHU3NkQxXHU1NDJDXHU1NDA0XHU3OUNEXHU0RThCXHU0RUY2XHVGRjBDXHU4MUVBXHU1MkE4XHU2NkY0XHU2NUIwXHU1OTI3XHU3RUIyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuZGVib3VuY2VUaW1lcikge1xuXHRcdFx0XHRcdGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlVGltZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuZGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUGx1Z2luOiBcdTY1ODdcdTRFRjZcdTYyNTNcdTVGMDBcdTRFOEJcdTRFRjZcdTg5RTZcdTUzRDFcIik7XG5cdFx0XHRcdFx0dGhpcy51cGRhdGVPdXRsaW5lVmlldygpO1xuXHRcdFx0XHR9LCA1MDApOyAvLyA1MDBtcyBcdTk2MzJcdTYyOTZcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImVkaXRvci1jaGFuZ2VcIiwgKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5kZWJvdW5jZVRpbWVyKSB7XG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VUaW1lcik7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5kZWJvdW5jZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQbHVnaW46IFx1N0YxNlx1OEY5MVx1NTY2OFx1NTNEOFx1NTMxNlx1NEU4Qlx1NEVGNlx1ODlFNlx1NTNEMVwiKTtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZU91dGxpbmVWaWV3KCk7XG5cdFx0XHRcdH0sIDUwMCk7IC8vIDUwMG1zIFx1OTYzMlx1NjI5NlxuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Ly8gXHU2REZCXHU1MkEwXHU1MjA2XHU5Njk0XHU3RUJGXHU1NDdEXHU0RUU0XG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImFkZC1zZWN0aW9uXCIsXG5cdFx0XHRuYW1lOiBcIkFkZCBTZWN0aW9uXCIsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblxuXHRcdFx0XHRjb25zdCBmb3JtYXR0ZXJFbmRMaW5lID0gdGhpcy5nZXRGcm9udG1hdHRlckVuZExpbmUoXG5cdFx0XHRcdFx0Y29udGVudC5zcGxpdChcIlxcblwiKVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRsZXQgaW5zZXJ0TGluZSA9IGZvcm1hdHRlckVuZExpbmUgKyAxOyAvLyBcdTlFRDhcdThCQTRcdTU3MjhcdTY1ODdcdTRFRjZcdTVGMDBcdTU5MzRcblx0XHRcdFx0Y29uc3QgY3Vyc29yUG9zID0gZWRpdG9yLmdldEN1cnNvcigpO1xuXHRcdFx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoXCJcXG5cIik7XG5cblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucmVzcGVjdEhlYWRpbmdzKSB7XG5cdFx0XHRcdFx0Ly8gXHU2N0U1XHU2MjdFXHU1MTQ5XHU2ODA3XHU0RTRCXHU1MjREXHU3Njg0XHU2NzAwXHU4RkQxXHU2ODA3XHU5ODk4XG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IGN1cnNvclBvcy5saW5lIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHRcdGlmIChsaW5lc1tpXS5tYXRjaCgvXiN7MSw2fVxccy8pKSB7XG5cdFx0XHRcdFx0XHRcdGluc2VydExpbmUgPSBpICsgMTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGluc2VydExpbmUgPT09IDApIHtcblx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKDAsIDApO1xuXHRcdFx0XHRcdGNvbnN0IG5ld0NvbnRlbnQgPSBcIlxcblxcbi0tLVxcblxcblwiO1xuXHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UobmV3Q29udGVudCwge1xuXHRcdFx0XHRcdFx0bGluZTogaW5zZXJ0TGluZSxcblx0XHRcdFx0XHRcdGNoOiAwLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IG5ld0NvbnRlbnQgPSBcIlxcblxcblxcbi0tLVxcblwiO1xuXHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKG5ld0NvbnRlbnQsIHsgbGluZTogaW5zZXJ0TGluZSwgY2g6IDAgfSk7XG5cdFx0XHRcdGVkaXRvci5zZXRDdXJzb3IoaW5zZXJ0TGluZSArIDEsIDApO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgSW5zdGFudEFib3ZlRGl2aWRlclNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBcdTUyMDdcdTYzNjJcdTU5MjdcdTdFQjJcdTg5QzZcdTU2RkVcdTY2M0VcdTc5M0EvXHU5NjkwXHU4NUNGXG5cdCAqL1xuXHRwcml2YXRlIHNob3dPdXRsaW5lKCk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTY3MDlcdTU5MjdcdTdFQjJcdTg5QzZcdTU2RkVcblx0XHRcdGNvbnN0IGV4aXN0aW5nTGVhZiA9XG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoT1VUTElORV9WSUVXX1RZUEUpO1xuXG5cdFx0XHRpZiAoZXhpc3RpbmdMZWFmLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU1REYyXHU1QjU4XHU1NzI4XHVGRjBDXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1M0VGXHU4OUMxXG5cdFx0XHRcdGNvbnN0IGxlYWYgPSBleGlzdGluZ0xlYWZbMF07XG5cdFx0XHRcdGlmIChsZWFmLmdldFZpZXdTdGF0ZSgpLnN0YXRlPy5hY3RpdmUpIHtcblx0XHRcdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTU5MjdcdTdFQjJcdTg5QzZcdTU2RkVcdTY2MkZcdTZEM0JcdTUyQThcdTc2ODRcdUZGMENcdTUyMTlcdTk2OTBcdTg1Q0ZcdTVCODNcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBsdWdpbjogXHU5NjkwXHU4NUNGXHU1OTI3XHU3RUIyXHU4OUM2XHU1NkZFXCIpO1xuXHRcdFx0XHRcdGxlYWYuZGV0YWNoKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU1OTI3XHU3RUIyXHU4OUM2XHU1NkZFXHU1QjU4XHU1NzI4XHU0RjQ2XHU0RTBEXHU2RDNCXHU1MkE4XHVGRjBDXHU1MjE5XHU2RkMwXHU2RDNCXHU1QjgzXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQbHVnaW46IFx1NkZDMFx1NkQzQlx1NTkyN1x1N0VCMlx1ODlDNlx1NTZGRVwiKTtcblx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU1OTI3XHU3RUIyXHU4OUM2XHU1NkZFXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUGx1Z2luOiBcdTUyMUJcdTVFRkFcdTY1QjBcdTc2ODRcdTU5MjdcdTdFQjJcdTg5QzZcdTU2RkVcIik7XG5cblx0XHRcdFx0Ly8gXHU1QzFEXHU4QkQ1XHU1OTFBXHU3OUNEXHU2NUI5XHU1RjBGXHU1MjFCXHU1RUZBXHU1OTI3XHU3RUIyXHU4OUM2XHU1NkZFXG5cdFx0XHRcdGxldCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG5cblx0XHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU1M0YzXHU0RkE3XHU1M0Y2XHU1QjUwXHU0RTBEXHU1M0VGXHU3NTI4XHVGRjBDXHU1QzFEXHU4QkQ1XHU1REU2XHU0RkE3XG5cdFx0XHRcdGlmICghbGVhZikge1xuXHRcdFx0XHRcdGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVmdExlYWYoZmFsc2UpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gXHU1OTgyXHU2NzlDXHU0RUNEXHU3MTM2XHU0RTBEXHU1M0VGXHU3NTI4XHVGRjBDXHU1QzFEXHU4QkQ1XHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU1M0Y2XHU1QjUwXG5cdFx0XHRcdGlmICghbGVhZikge1xuXHRcdFx0XHRcdGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKHRydWUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGxlYWYpIHtcblx0XHRcdFx0XHRsZWFmLnNldFZpZXdTdGF0ZSh7XG5cdFx0XHRcdFx0XHR0eXBlOiBPVVRMSU5FX1ZJRVdfVFlQRSxcblx0XHRcdFx0XHRcdGFjdGl2ZTogdHJ1ZSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBsdWdpbjogXHU1OTI3XHU3RUIyXHU4OUM2XHU1NkZFXHU1MjFCXHU1RUZBXHU2MjEwXHU1MjlGXCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFx0XHRcIlBsdWdpbjogXHU2NUUwXHU2Q0Q1XHU1MjFCXHU1RUZBXHU1OTI3XHU3RUIyXHU4OUM2XHU1NkZFXHVGRjBDXHU1REU1XHU0RjVDXHU1MzNBXHU1M0VGXHU4MEZEXHU2NzJBXHU1QjhDXHU1MTY4XHU1MjFEXHU1OUNCXHU1MzE2XCJcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJQbHVnaW46IFx1NjYzRVx1NzkzQVx1NTkyN1x1N0VCMlx1ODlDNlx1NTZGRVx1NjVGNlx1NTNEMVx1NzUxRlx1OTUxOVx1OEJFRjpcIiwgZXJyb3IpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBcdTY2RjRcdTY1QjBcdTYyNDBcdTY3MDlcdTU5MjdcdTdFQjJcdTg5QzZcdTU2RkVcblx0ICovXG5cdHByaXZhdGUgdXBkYXRlT3V0bGluZVZpZXcoKTogdm9pZCB7XG5cdFx0Y29uc29sZS5sb2coXCJQbHVnaW46IFx1NUYwMFx1NTlDQlx1NjZGNFx1NjVCMFx1NTkyN1x1N0VCMlx1ODlDNlx1NTZGRVwiKTtcblx0XHRjb25zdCBvdXRsaW5lTGVhdmVzID1cblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoT1VUTElORV9WSUVXX1RZUEUpO1xuXHRcdGNvbnNvbGUubG9nKFwiUGx1Z2luOiBcdTYyN0VcdTUyMzBcdTU5MjdcdTdFQjJcdTg5QzZcdTU2RkVcdTY1NzBcdTkxQ0Y6XCIsIG91dGxpbmVMZWF2ZXMubGVuZ3RoKTtcblxuXHRcdC8vIFx1NTNFQVx1NzUyOFx1NjZGNFx1NjVCMFx1NEUwMFx1NEUyQVx1NTkyN1x1N0VCMlx1ODlDNlx1NTZGRVxuXHRcdGNvbnN0IGxlYWYgPSBvdXRsaW5lTGVhdmVzWzBdO1xuXHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgT3V0bGluZVZpZXc7XG5cdFx0aWYgKHZpZXcgJiYgdHlwZW9mIHZpZXcudXBkYXRlT3V0bGluZSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhgUGx1Z2luOiBcdTY2RjRcdTY1QjBcdTU5MjdcdTdFQjJcdTg5QzZcdTU2RkVgKTtcblx0XHRcdHZpZXcudXBkYXRlT3V0bGluZSgpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcblx0XHRcdHt9LFxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKVxuXHRcdCk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdHB1YmxpYyB1cGRhdGVPdXRsaW5lQ29uZmlnKCk6IHZvaWQge1xuXHRcdGNvbnN0IG91dGxpbmVMZWF2ZXMgPVxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShPVVRMSU5FX1ZJRVdfVFlQRSk7XG5cdFx0Y29uc3QgbGVhZiA9IG91dGxpbmVMZWF2ZXNbMF07XG5cdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldyBhcyBPdXRsaW5lVmlldztcblx0XHRpZiAodmlldyAmJiB0eXBlb2Ygdmlldy51cGRhdGVDb25maWcgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0Y29uc29sZS5sb2coXCJQbHVnaW46IFx1NjZGNFx1NjVCMFx1NTkyN1x1N0VCMlx1ODlDNlx1NTZGRVx1OTE0RFx1N0Y2RVwiKTtcblx0XHRcdHZpZXcudXBkYXRlQ29uZmlnKHRoaXMuc2V0dGluZ3MubWF4Q29udGVudExlbmd0aCk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuZGVib3VuY2VUaW1lcikge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VUaW1lcik7XG5cdFx0fVxuXHRcdHRoaXMuZGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coXCJQbHVnaW46IFx1OTE0RFx1N0Y2RVx1NjZGNFx1NjVCMFx1NUJGQ1x1ODFGNFx1NTkyN1x1N0VCMlx1ODlDNlx1NTZGRVx1NjZGNFx1NjVCMFwiKTtcblx0XHRcdHRoaXMudXBkYXRlT3V0bGluZVZpZXcoKTtcblx0XHR9LCA1MDApO1xuXHR9XG59XG5cbmNsYXNzIEluc3RhbnRBYm92ZURpdmlkZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogSW5zdGFudEFib3ZlRGl2aWRlclBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBJbnN0YW50QWJvdmVEaXZpZGVyUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiUmVzcGVjdCBIZWFkaW5nc1wiKVxuXHRcdFx0LnNldERlc2MoXG5cdFx0XHRcdFwiV2hlbiBlbmFibGVkLCBuZXcgc2VjdGlvbnMgd2lsbCBiZSBpbnNlcnRlZCBhYm92ZSB0aGUgbmVhcmVzdCBoZWFkaW5nXCJcblx0XHRcdClcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc3BlY3RIZWFkaW5ncylcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXNwZWN0SGVhZGluZ3MgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlNob3cgT3V0bGluZSBpbiBTaWRlYmFyXCIpXG5cdFx0XHQuc2V0RGVzYyhcblx0XHRcdFx0XCJXaGVuIGVuYWJsZWQsIHRoZSBvdXRsaW5lIHZpZXcgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IG9wZW5lZCB3aGVuIHRoZSBwbHVnaW4gbG9hZHNcIlxuXHRcdFx0KVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd091dGxpbmVJblNpZGViYXIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd091dGxpbmVJblNpZGViYXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIk1heCBDb250ZW50IExlbmd0aFwiKVxuXHRcdFx0LnNldERlc2MoXG5cdFx0XHRcdFwiTWF4aW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyB0byBleHRyYWN0IGZyb20gZGl2aWRlciBjb250ZW50IChkZWZhdWx0OiAxMClcIlxuXHRcdFx0KVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCIxMFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhDb250ZW50TGVuZ3RoLnRvU3RyaW5nKCkpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgbnVtVmFsdWUgPSBwYXJzZUludCh2YWx1ZSkgfHwgMTA7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhDb250ZW50TGVuZ3RoID0gbnVtVmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnVwZGF0ZU91dGxpbmVDb25maWcoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0fVxufVxuIiwgImltcG9ydCB7IEFwcCwgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE1hcmtkb3duVmlldyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgT3V0bGluZVNlcnZpY2UgfSBmcm9tIFwiLi9vdXRsaW5lLXNlcnZpY2VcIjtcbmltcG9ydCB7IE91dGxpbmVJdGVtIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IE9VVExJTkVfVklFV19UWVBFID0gXCJvdXRsaW5lLXZpZXdcIjtcblxuZXhwb3J0IGNsYXNzIE91dGxpbmVWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXHRwcml2YXRlIG91dGxpbmVTZXJ2aWNlOiBPdXRsaW5lU2VydmljZTtcblx0cHJpdmF0ZSBvdXRsaW5lSXRlbXM6IE91dGxpbmVJdGVtW10gPSBbXTtcblxuXHRjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBhcHA6IEFwcCwgbWF4Q29udGVudExlbmd0aDogbnVtYmVyID0gMTApIHtcblx0XHRzdXBlcihsZWFmKTtcblx0XHR0aGlzLm91dGxpbmVTZXJ2aWNlID0gbmV3IE91dGxpbmVTZXJ2aWNlKGFwcCwgbWF4Q29udGVudExlbmd0aCk7XG5cdH1cblxuXHRnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBPVVRMSU5FX1ZJRVdfVFlQRTtcblx0fVxuXG5cdGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIFwiT3V0bGluZVwiO1xuXHR9XG5cblx0Z2V0SWNvbigpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcImxpc3QtdHJlZVwiO1xuXHR9XG5cblx0YXN5bmMgb25PcGVuKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsO1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU3QjE0XHU4QkIwXHU3Njg0XHU1OTI3XHU3RUIyXHU2NTcwXHU2MzZFXG5cdFx0dGhpcy51cGRhdGVPdXRsaW5lKCk7XG5cdH1cblxuXHQvKipcblx0ICogXHU2RTMyXHU2N0QzXHU1OTI3XHU3RUIyXHU3NTRDXHU5NzYyXG5cdCAqL1xuXHRyZW5kZXIob3V0bGluZUl0ZW1zPzogT3V0bGluZUl0ZW1bXSk6IHZvaWQge1xuXHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0XCJPdXRsaW5lVmlldzogXHU1RjAwXHU1OUNCXHU2RTMyXHU2N0QzXHU1OTI3XHU3RUIyXHVGRjBDXHU5ODc5XHU3NkVFXHU2NTcwXHU5MUNGOlwiLFxuXHRcdFx0b3V0bGluZUl0ZW1zPy5sZW5ndGggfHwgdGhpcy5vdXRsaW5lSXRlbXMubGVuZ3RoXG5cdFx0KTtcblxuXHRcdGlmIChvdXRsaW5lSXRlbXMpIHtcblx0XHRcdHRoaXMub3V0bGluZUl0ZW1zID0gb3V0bGluZUl0ZW1zO1xuXHRcdH1cblxuXHRcdC8vIFx1NkUwNVx1OTY2NFx1NzNCMFx1NjcwOVx1NTE4NVx1NUJCOVx1RkYwOFx1NEZERFx1NzU1OVx1NjgwN1x1OTg5OFx1RkYwOVxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsIGFzIEhUTUxFbGVtZW50O1xuXHRcdGNvbnN0IGNvbnRlbnRFbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLm91dGxpbmUtY29udGVudFwiKTtcblx0XHRpZiAoY29udGVudEVsKSB7XG5cdFx0XHRjb250ZW50RWwucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29udGVudENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoXCJvdXRsaW5lLWNvbnRlbnRcIik7XG5cblx0XHRpZiAodGhpcy5vdXRsaW5lSXRlbXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250ZW50Q29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiTm8gb3V0bGluZSBjb250ZW50IGZvdW5kLiBBZGQgaGVhZGluZ3MgKCMgIyMgIyMjKSBvciBkaXZpZGVycyAoLS0tKSB0byB5b3VyIG5vdGUuXCIsXG5cdFx0XHRcdGNsczogXCJvdXRsaW5lLWVtcHR5XCIsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnNvbGUubG9nKFwiT3V0bGluZVZpZXc6IFx1NkUzMlx1NjdEM1x1N0E3QVx1NTE4NVx1NUJCOVx1NjNEMFx1NzkzQVwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBcdTZFMzJcdTY3RDNcdTU5MjdcdTdFQjJcdTk4NzlcdTc2RUVcblx0XHR0aGlzLm91dGxpbmVJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG5cdFx0XHR0aGlzLnJlbmRlck91dGxpbmVJdGVtKGNvbnRlbnRDb250YWluZXIsIGl0ZW0pO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFx1NkUzMlx1NjdEM1x1NTM1NVx1NEUyQVx1NTkyN1x1N0VCMlx1OTg3OVx1NzZFRVxuXHQgKi9cblx0cHJpdmF0ZSByZW5kZXJPdXRsaW5lSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBpdGVtOiBPdXRsaW5lSXRlbSk6IHZvaWQge1xuXHRcdGNvbnN0IGl0ZW1FbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoXCJvdXRsaW5lLWl0ZW1cIik7XG5cblx0XHQvLyBcdTZERkJcdTUyQTBcdTY1NzBcdTYzNkVcdTVDNUVcdTYwMjdcblx0XHRpdGVtRWwuc2V0QXR0cmlidXRlKFwiZGF0YS10eXBlXCIsIGl0ZW0udHlwZSk7XG5cdFx0aXRlbUVsLnNldEF0dHJpYnV0ZShcImRhdGEtbGV2ZWxcIiwgaXRlbS5sZXZlbC50b1N0cmluZygpKTtcblxuXHRcdC8vIFx1NTIxQlx1NUVGQVx1NTZGRVx1NjgwN1xuXHRcdGNvbnN0IGljb25FbCA9IGl0ZW1FbC5jcmVhdGVTcGFuKFwib3V0bGluZS1pdGVtLWljb25cIik7XG5cdFx0aWYgKGl0ZW0udHlwZSA9PT0gXCJoZWFkaW5nXCIpIHtcblx0XHRcdC8vIFx1NEY3Rlx1NzUyOCBIMVx1MzAwMUgyXHUzMDAxSDMgXHU3QjQ5XHU1QzQyXHU3RUE3XHU2ODA3XHU4QkM2XG5cdFx0XHRpY29uRWwuaW5uZXJIVE1MID0gYEgke2l0ZW0ubGV2ZWx9YDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gXHU1MjA2XHU5Njk0XHU3RUJGXHU0RjdGXHU3NTI4XHU1MjA2XHU1MjcyXHU3RUJGXHU1NkZFXHU2ODA3XG5cdFx0XHRpY29uRWwuaW5uZXJIVE1MID0gXCJcdTI3OTZcIjtcblx0XHR9XG5cblx0XHQvLyBcdTUyMUJcdTVFRkFcdTY4MDdcdTk4OThcblx0XHRjb25zdCB0aXRsZUVsID0gaXRlbUVsLmNyZWF0ZVNwYW4oXCJvdXRsaW5lLWl0ZW0tdGl0bGVcIik7XG5cdFx0dGl0bGVFbC50ZXh0Q29udGVudCA9IGl0ZW0udGl0bGU7XG5cblx0XHQvLyBcdTZERkJcdTUyQTBcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcblx0XHRpdGVtRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRcdHRoaXMuaGFuZGxlSXRlbUNsaWNrKGl0ZW0pO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFx1NTkwNFx1NzQwNlx1OTg3OVx1NzZFRVx1NzBCOVx1NTFGQlxuXHQgKi9cblx0cHJpdmF0ZSBoYW5kbGVJdGVtQ2xpY2soaXRlbTogT3V0bGluZUl0ZW0pOiB2b2lkIHtcblx0XHRjb25zb2xlLmxvZyhcIk91dGxpbmVWaWV3OiBcdTcwQjlcdTUxRkJcdTU5MjdcdTdFQjJcdTk4NzlcdTc2RUU6XCIsIGl0ZW0udGl0bGUsIFwiXHU4ODRDOlwiLCBpdGVtLmxpbmUpO1xuXG5cdFx0Ly8gXHU2N0U1XHU2MjdFXHU2MjQwXHU2NzA5IE1hcmtkb3duIFx1ODlDNlx1NTZGRVxuXHRcdGNvbnN0IG1hcmtkb3duTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcIm1hcmtkb3duXCIpO1xuXHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0XCJPdXRsaW5lVmlldzogXHU2MjdFXHU1MjMwIE1hcmtkb3duIFx1ODlDNlx1NTZGRVx1NjU3MFx1OTFDRjpcIixcblx0XHRcdG1hcmtkb3duTGVhdmVzLmxlbmd0aFxuXHRcdCk7XG5cblx0XHRpZiAobWFya2Rvd25MZWF2ZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIk91dGxpbmVWaWV3OiBcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBcdTRFRkJcdTRGNTUgTWFya2Rvd24gXHU4OUM2XHU1NkZFXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFx1ODNCN1x1NTNENlx1N0IyQ1x1NEUwMFx1NEUyQSBNYXJrZG93biBcdTg5QzZcdTU2RkVcdUZGMDhcdTkwMUFcdTVFMzhcdTY2MkZcdTY3MDBcdTY1QjBcdTYyNTNcdTVGMDBcdTc2ODRcdUZGMDlcblx0XHRjb25zdCBtYXJrZG93blZpZXcgPSBtYXJrZG93bkxlYXZlc1swXS52aWV3IGFzIE1hcmtkb3duVmlldztcblx0XHRpZiAoIW1hcmtkb3duVmlldykge1xuXHRcdFx0Y29uc29sZS5sb2coXCJPdXRsaW5lVmlldzogTWFya2Rvd24gXHU4OUM2XHU1NkZFXHU2NUUwXHU2NTQ4XCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFx1NkZDMFx1NkQzQiBNYXJrZG93biBcdTg5QzZcdTU2RkVcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihtYXJrZG93bkxlYXZlc1swXSwgeyBmb2N1czogdHJ1ZSB9KTtcblxuXHRcdC8vIFx1ODNCN1x1NTNENlx1N0YxNlx1OEY5MVx1NTY2OFxuXHRcdGNvbnN0IGVkaXRvciA9IG1hcmtkb3duVmlldy5lZGl0b3I7XG5cblx0XHQvLyBcdTYyNjdcdTg4NENcdTVCRkNcdTgyMkFcblx0XHR0aGlzLm91dGxpbmVTZXJ2aWNlLm5hdmlnYXRlVG9PdXRsaW5lSXRlbShlZGl0b3IsIGl0ZW0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFx1NjYzRVx1NzkzQVx1NTkyN1x1N0VCMlxuXHQgKi9cblx0c2hvdygpOiB2b2lkIHtcblx0XHR0aGlzLnJlbmRlcigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFx1OTY5MFx1ODVDRlx1NTkyN1x1N0VCMlxuXHQgKi9cblx0aGlkZSgpOiB2b2lkIHtcblx0XHQvLyBcdTU5MjdcdTdFQjJcdTg5QzZcdTU2RkVcdTc2ODRcdTk2OTBcdTg1Q0ZcdTc1MzEgT2JzaWRpYW4gXHU1OTA0XHU3NDA2XG5cdH1cblxuXHQvKipcblx0ICogXHU2NkY0XHU2NUIwXHU1OTI3XHU3RUIyXHU1MTg1XHU1QkI5XG5cdCAqL1xuXHR1cGRhdGVPdXRsaW5lKCk6IHZvaWQge1xuXHRcdGNvbnNvbGUubG9nKFwiT3V0bGluZVZpZXc6IFx1NUYwMFx1NTlDQlx1NjZGNFx1NjVCMFx1NTkyN1x1N0VCMlwiKTtcblxuXHRcdC8vIFx1NUYzQVx1NTIzNlx1OTFDRFx1NjVCMFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1N0IxNFx1OEJCMFx1NzY4NFx1NTkyN1x1N0VCMlxuXHRcdGNvbnN0IG91dGxpbmVJdGVtcyA9IHRoaXMub3V0bGluZVNlcnZpY2UuZ2V0T3V0bGluZUZvckN1cnJlbnROb3RlKCk7XG5cdFx0Y29uc29sZS5sb2coXG5cdFx0XHRcIk91dGxpbmVWaWV3OiBcdTgzQjdcdTUzRDZcdTUyMzBcdTU5MjdcdTdFQjJcdTk4NzlcdTc2RUVcdTY1NzBcdTkxQ0Y6XCIsXG5cdFx0XHRvdXRsaW5lSXRlbXMubGVuZ3RoLFxuXHRcdFx0b3V0bGluZUl0ZW1zXG5cdFx0KTtcblxuXHRcdC8vIFx1NkUwNVx1N0E3QVx1NzNCMFx1NjcwOVx1NjU3MFx1NjM2RVx1NUU3Nlx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1xuXHRcdHRoaXMub3V0bGluZUl0ZW1zID0gW107XG5cdFx0dGhpcy5yZW5kZXIob3V0bGluZUl0ZW1zKTtcblxuXHRcdGNvbnNvbGUubG9nKFwiT3V0bGluZVZpZXc6IFx1NTkyN1x1N0VCMlx1NjZGNFx1NjVCMFx1NUI4Q1x1NjIxMFwiKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBcdTY2RjRcdTY1QjBcdTkxNERcdTdGNkVcblx0ICovXG5cdHVwZGF0ZUNvbmZpZyhtYXhDb250ZW50TGVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcblx0XHRjb25zb2xlLmxvZyhcIk91dGxpbmVWaWV3OiBcdTVGMDBcdTU5Q0JcdTY2RjRcdTY1QjBcdTkxNERcdTdGNkVcIik7XG5cdFx0dGhpcy5vdXRsaW5lU2VydmljZSA9IG5ldyBPdXRsaW5lU2VydmljZSh0aGlzLmFwcCwgbWF4Q29udGVudExlbmd0aCk7XG5cdFx0Y29uc29sZS5sb2coXG5cdFx0XHRcIk91dGxpbmVWaWV3OiBcdTkxNERcdTdGNkVcdTY2RjRcdTY1QjBcdTVCOENcdTYyMTBcdUZGMENtYXhDb250ZW50TGVuZ3RoOlwiLFxuXHRcdFx0bWF4Q29udGVudExlbmd0aFxuXHRcdCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBPdXRsaW5lUGFyc2VyIH0gZnJvbSBcIi4vb3V0bGluZS1wYXJzZXJcIjtcbmltcG9ydCB7IE91dGxpbmVJdGVtIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIE91dGxpbmVTZXJ2aWNlIHtcblx0cHJpdmF0ZSBwYXJzZXI6IE91dGxpbmVQYXJzZXI7XG5cdHByaXZhdGUgYXBwOiBBcHA7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG1heENvbnRlbnRMZW5ndGg6IG51bWJlciA9IDEwKSB7XG5cdFx0dGhpcy5hcHAgPSBhcHA7XG5cdFx0dGhpcy5wYXJzZXIgPSBuZXcgT3V0bGluZVBhcnNlcihtYXhDb250ZW50TGVuZ3RoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBcdTc1MUZcdTYyMTBcdTU5MjdcdTdFQjJcdTY1NzBcdTYzNkVcblx0ICovXG5cdGdlbmVyYXRlT3V0bGluZShjb250ZW50OiBzdHJpbmcpOiBPdXRsaW5lSXRlbVtdIHtcblx0XHRpZiAoIWNvbnRlbnQgfHwgY29udGVudC50cmltKCkgPT09IFwiXCIpIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cblx0XHRjb25zdCBwYXJzZWRDb250ZW50ID0gdGhpcy5wYXJzZXIucGFyc2VDb250ZW50KGNvbnRlbnQpO1xuXHRcdGNvbnN0IG91dGxpbmVJdGVtczogT3V0bGluZUl0ZW1bXSA9IFtdO1xuXG5cdFx0Ly8gXHU1OTA0XHU3NDA2XHU2ODA3XHU5ODk4XG5cdFx0cGFyc2VkQ29udGVudC5oZWFkaW5ncy5mb3JFYWNoKChoZWFkaW5nKSA9PiB7XG5cdFx0XHRvdXRsaW5lSXRlbXMucHVzaCh7XG5cdFx0XHRcdGlkOiB0aGlzLnBhcnNlci5nZW5lcmF0ZUlkKFwiaGVhZGluZ1wiLCBoZWFkaW5nLmxpbmUpLFxuXHRcdFx0XHR0eXBlOiBcImhlYWRpbmdcIixcblx0XHRcdFx0bGV2ZWw6IGhlYWRpbmcubGV2ZWwsXG5cdFx0XHRcdHRpdGxlOiBoZWFkaW5nLnRpdGxlLFxuXHRcdFx0XHRsaW5lOiBoZWFkaW5nLmxpbmUsXG5cdFx0XHRcdGNoOiBoZWFkaW5nLmNoLFxuXHRcdFx0XHRpc0V4cGFuZGVkOiB0cnVlLFxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBcdTU5MDRcdTc0MDZcdTUyMDZcdTk2OTRcdTdFQkZcblx0XHRwYXJzZWRDb250ZW50LmRpdmlkZXJzLmZvckVhY2goKGRpdmlkZXIpID0+IHtcblx0XHRcdGlmICh0aGlzLnBhcnNlci5pc1ZhbGlkQ29udGVudChkaXZpZGVyLnRpdGxlKSkge1xuXHRcdFx0XHRvdXRsaW5lSXRlbXMucHVzaCh7XG5cdFx0XHRcdFx0aWQ6IHRoaXMucGFyc2VyLmdlbmVyYXRlSWQoXCJkaXZpZGVyXCIsIGRpdmlkZXIubGluZSksXG5cdFx0XHRcdFx0dHlwZTogXCJkaXZpZGVyXCIsXG5cdFx0XHRcdFx0bGV2ZWw6IGRpdmlkZXIubGV2ZWwsIC8vIFx1NEY3Rlx1NzUyOFx1OEJBMVx1N0I5N1x1NTFGQVx1NzY4NFx1NUM0Mlx1N0VBN1xuXHRcdFx0XHRcdHRpdGxlOiBkaXZpZGVyLnRpdGxlLFxuXHRcdFx0XHRcdGxpbmU6IGRpdmlkZXIubGluZSxcblx0XHRcdFx0XHRjaDogZGl2aWRlci5jaCxcblx0XHRcdFx0XHRpc0V4cGFuZGVkOiB0cnVlLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFx1NjMwOVx1ODg0Q1x1NTNGN1x1NjM5Mlx1NUU4RlxuXHRcdG91dGxpbmVJdGVtcy5zb3J0KChhLCBiKSA9PiBhLmxpbmUgLSBiLmxpbmUpO1xuXG5cdFx0cmV0dXJuIG91dGxpbmVJdGVtcztcblx0fVxuXG5cdC8qKlxuXHQgKiBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTdCMTRcdThCQjBcdTc2ODRcdTU5MjdcdTdFQjJcblx0ICovXG5cdGdldE91dGxpbmVGb3JDdXJyZW50Tm90ZSgpOiBPdXRsaW5lSXRlbVtdIHtcblx0XHRjb25zb2xlLmxvZyhcIk91dGxpbmVTZXJ2aWNlOiBcdTVGMDBcdTU5Q0JcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTdCMTRcdThCQjBcdTU5MjdcdTdFQjJcIik7XG5cdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0aWYgKCFhY3RpdmVWaWV3KSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIk91dGxpbmVTZXJ2aWNlOiBcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBcdTZEM0JcdTUyQThcdTc2ODQgTWFya2Rvd24gXHU4OUM2XHU1NkZFXCIpO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblxuXHRcdGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblx0XHRjb25zb2xlLmxvZyhcIk91dGxpbmVTZXJ2aWNlOiBcdTgzQjdcdTUzRDZcdTUyMzBcdTUxODVcdTVCQjlcdTk1N0ZcdTVFQTY6XCIsIGNvbnRlbnQubGVuZ3RoKTtcblx0XHRjb25zb2xlLmxvZyhcblx0XHRcdFwiT3V0bGluZVNlcnZpY2U6IFx1NTE4NVx1NUJCOVx1OTg4NFx1ODlDODpcIixcblx0XHRcdGNvbnRlbnQuc3Vic3RyaW5nKDAsIDEwMCkgKyBcIi4uLlwiXG5cdFx0KTtcblxuXHRcdGNvbnN0IG91dGxpbmUgPSB0aGlzLmdlbmVyYXRlT3V0bGluZShjb250ZW50KTtcblx0XHRjb25zb2xlLmxvZyhcIk91dGxpbmVTZXJ2aWNlOiBcdTc1MUZcdTYyMTBcdTU5MjdcdTdFQjJcdTk4NzlcdTc2RUVcdTY1NzBcdTkxQ0Y6XCIsIG91dGxpbmUubGVuZ3RoKTtcblxuXHRcdC8vIFx1OEY5M1x1NTFGQVx1NTkyN1x1N0VCMlx1OTg3OVx1NzZFRVx1NzY4NFx1OEJFNlx1N0VDNlx1NEZFMVx1NjA2RlxuXHRcdG91dGxpbmUuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcblx0XHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0XHRgT3V0bGluZVNlcnZpY2U6IFx1OTg3OVx1NzZFRSAke2luZGV4ICsgMX06IFske2l0ZW0udHlwZX1dICR7XG5cdFx0XHRcdFx0aXRlbS50aXRsZVxuXHRcdFx0XHR9IChcdTVDNDJcdTdFQTc6ICR7aXRlbS5sZXZlbH0sIFx1ODg0QzogJHtpdGVtLmxpbmV9KWBcblx0XHRcdCk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gb3V0bGluZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBcdTVCRkNcdTgyMkFcdTUyMzBcdTYzMDdcdTVCOUFcdTRGNERcdTdGNkVcblx0ICovXG5cdG5hdmlnYXRlVG9Qb3NpdGlvbihlZGl0b3I6IEVkaXRvciwgbGluZTogbnVtYmVyLCBjaDogbnVtYmVyKTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnNvbGUubG9nKFwiT3V0bGluZVNlcnZpY2U6IFx1NUYwMFx1NTlDQlx1NUJGQ1x1ODIyQVx1NTIzMFx1NEY0RFx1N0Y2RTpcIiwgbGluZSwgY2gpO1xuXG5cdFx0XHQvLyBcdTlBOENcdThCQzFcdTg4NENcdTUzRjdcdTY2MkZcdTU0MjZcdTY3MDlcdTY1NDhcblx0XHRcdGNvbnN0IGxpbmVDb3VudCA9IGVkaXRvci5saW5lQ291bnQoKTtcblx0XHRcdGlmIChsaW5lIDwgMCB8fCBsaW5lID49IGxpbmVDb3VudCkge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XHRcdFwiT3V0bGluZVNlcnZpY2U6IFx1NjVFMFx1NjU0OFx1NzY4NFx1ODg0Q1x1NTNGNzpcIixcblx0XHRcdFx0XHRsaW5lLFxuXHRcdFx0XHRcdFwiXHU2MDNCXHU4ODRDXHU2NTcwOlwiLFxuXHRcdFx0XHRcdGxpbmVDb3VudFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFx1OUE4Q1x1OEJDMVx1NTIxN1x1NTNGN1x1NjYyRlx1NTQyNlx1NjcwOVx1NjU0OFxuXHRcdFx0Y29uc3QgbGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShsaW5lKTtcblx0XHRcdGlmIChsaW5lQ29udGVudCAmJiBjaCA+IGxpbmVDb250ZW50Lmxlbmd0aCkge1xuXHRcdFx0XHRjaCA9IGxpbmVDb250ZW50Lmxlbmd0aDsgLy8gXHU4QzAzXHU2NTc0XHU1MjMwXHU4ODRDXHU1QzNFXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiT3V0bGluZVNlcnZpY2U6IFx1NTIxN1x1NTNGN1x1OEMwM1x1NjU3NFx1NTIzMFx1ODg0Q1x1NUMzRTpcIiwgY2gpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBcdThCQkVcdTdGNkVcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcblx0XHRcdGVkaXRvci5zZXRDdXJzb3IobGluZSwgY2gpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJPdXRsaW5lU2VydmljZTogXHU1MTQ5XHU2ODA3XHU0RjREXHU3RjZFXHU1REYyXHU4QkJFXHU3RjZFXHU1MjMwOlwiLCBsaW5lLCBjaCk7XG5cblx0XHRcdC8vIFx1ODA1QVx1NzEyNlx1N0YxNlx1OEY5MVx1NTY2OFxuXHRcdFx0ZWRpdG9yLmZvY3VzKCk7XG5cdFx0XHRjb25zb2xlLmxvZyhcIk91dGxpbmVTZXJ2aWNlOiBcdTdGMTZcdThGOTFcdTU2NjhcdTVERjJcdTgwNUFcdTcxMjZcIik7XG5cblx0XHRcdC8vIFx1Nzg2RVx1NEZERFx1NzZFRVx1NjgwN1x1NEY0RFx1N0Y2RVx1NTcyOFx1ODlDNlx1NTZGRVx1NEUyRFx1NTNFRlx1ODlDMVxuXHRcdFx0ZWRpdG9yLnNjcm9sbEludG9WaWV3KFxuXHRcdFx0XHR7IGZyb206IHsgbGluZSwgY2ggfSwgdG86IHsgbGluZSwgY2ggfSB9LFxuXHRcdFx0XHR0cnVlXG5cdFx0XHQpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJPdXRsaW5lU2VydmljZTogXHU4OUM2XHU1NkZFXHU1REYyXHU2RURBXHU1MkE4XHU1MjMwXHU3NkVFXHU2ODA3XHU0RjREXHU3RjZFXCIpO1xuXG5cdFx0XHQvLyBcdTUzRUZcdTkwMDlcdUZGMUFcdTkwMDlcdTRFMkRcdTVGNTNcdTUyNERcdTg4NENcdUZGMDhcdTYzRDBcdTRGOUJcdTg5QzZcdTg5QzlcdTUzQ0RcdTk5ODhcdUZGMDlcblx0XHRcdC8vIGVkaXRvci5zZXRTZWxlY3Rpb24oeyBsaW5lLCBjaDogMCB9LCB7IGxpbmUsIGNoOiBsaW5lQ29udGVudD8ubGVuZ3RoIHx8IDAgfSk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJPdXRsaW5lU2VydmljZTogXHU1QkZDXHU4MjJBXHU1OTMxXHU4RDI1OlwiLCBlcnJvcik7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFx1NUJGQ1x1ODIyQVx1NTIzMFx1NTkyN1x1N0VCMlx1OTg3OVx1NzZFRVxuXHQgKi9cblx0bmF2aWdhdGVUb091dGxpbmVJdGVtKGVkaXRvcjogRWRpdG9yLCBpdGVtOiBPdXRsaW5lSXRlbSk6IHZvaWQge1xuXHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0XCJPdXRsaW5lU2VydmljZTogXHU1QkZDXHU4MjJBXHU1MjMwXHU1OTI3XHU3RUIyXHU5ODc5XHU3NkVFOlwiLFxuXHRcdFx0aXRlbS50aXRsZSxcblx0XHRcdFwiXHU3QzdCXHU1NzhCOlwiLFxuXHRcdFx0aXRlbS50eXBlXG5cdFx0KTtcblxuXHRcdGxldCB0YXJnZXRMaW5lID0gaXRlbS5saW5lO1xuXHRcdGxldCB0YXJnZXRDaCA9IGl0ZW0uY2g7XG5cblx0XHQvLyBcdTY4MzlcdTYzNkVcdTk4NzlcdTc2RUVcdTdDN0JcdTU3OEJcdThDMDNcdTY1NzRcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcblx0XHRpZiAoaXRlbS50eXBlID09PSBcImhlYWRpbmdcIikge1xuXHRcdFx0Ly8gXHU1QkY5XHU0RThFXHU2ODA3XHU5ODk4XHVGRjBDXHU1MTQ5XHU2ODA3XHU3OUZCXHU1MkE4XHU1MjMwXHU2ODA3XHU5ODk4XHU2NTg3XHU2NzJDXHU3Njg0XHU1RjAwXHU1OUNCXHU0RjREXHU3RjZFXG5cdFx0XHRjb25zdCBsaW5lQ29udGVudCA9IGVkaXRvci5nZXRMaW5lKGl0ZW0ubGluZSk7XG5cdFx0XHRpZiAobGluZUNvbnRlbnQpIHtcblx0XHRcdFx0Ly8gXHU2MjdFXHU1MjMwXHU2ODA3XHU5ODk4XHU2NTg3XHU2NzJDXHU3Njg0XHU1RjAwXHU1OUNCXHU0RjREXHU3RjZFXHVGRjA4XHU4REYzXHU4RkM3ICMgXHU3QjI2XHU1M0Y3XHU1NDhDXHU3QTdBXHU2ODNDXHVGRjA5XG5cdFx0XHRcdGNvbnN0IG1hdGNoID0gbGluZUNvbnRlbnQubWF0Y2goL14oI3sxLDZ9KVxccysoLispJC8pO1xuXHRcdFx0XHRpZiAobWF0Y2gpIHtcblx0XHRcdFx0XHR0YXJnZXRDaCA9IG1hdGNoWzFdLmxlbmd0aCArIDE7IC8vICMgXHU3QjI2XHU1M0Y3XHU5NTdGXHU1RUE2ICsgMVx1NEUyQVx1N0E3QVx1NjgzQ1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0XHRcdFx0XCJPdXRsaW5lU2VydmljZTogXHU2ODA3XHU5ODk4XHU1MTQ5XHU2ODA3XHU0RjREXHU3RjZFXHU4QzAzXHU2NTc0XHU1MjMwOlwiLFxuXHRcdFx0XHRcdFx0dGFyZ2V0Q2hcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChpdGVtLnR5cGUgPT09IFwiZGl2aWRlclwiKSB7XG5cdFx0XHQvLyBcdTVCRjlcdTRFOEVcdTUyMDZcdTk2OTRcdTdFQkZcdUZGMENcdTUxNDlcdTY4MDdcdTc5RkJcdTUyQThcdTUyMzBcdTUyMDZcdTk2OTRcdTdFQkZcdTU0MEVcdTc2ODRcdTUxODVcdTVCQjlcdTVGMDBcdTU5Q0JcdTRGNERcdTdGNkVcblx0XHRcdGNvbnN0IGxpbmVzID0gZWRpdG9yLmdldFZhbHVlKCkuc3BsaXQoXCJcXG5cIik7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gdGhpcy5wYXJzZXIuZXh0cmFjdERpdmlkZXJDb250ZW50KGxpbmVzLCBpdGVtLmxpbmUpO1xuXHRcdFx0aWYgKGNvbnRlbnQpIHtcblx0XHRcdFx0Ly8gXHU2N0U1XHU2MjdFXHU1MjA2XHU5Njk0XHU3RUJGXHU1NDBFXHU3Njg0XHU3QjJDXHU0RTAwXHU0RTJBXHU5NzVFXHU3QTdBXHU4ODRDXG5cdFx0XHRcdGZvciAobGV0IGkgPSBpdGVtLmxpbmUgKyAxOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xuXHRcdFx0XHRcdGlmIChsaW5lICYmIGxpbmUgIT09IFwiLS0tXCIgJiYgIWxpbmUubWF0Y2goL14jezEsNn1cXHMvKSkge1xuXHRcdFx0XHRcdFx0dGFyZ2V0TGluZSA9IGk7XG5cdFx0XHRcdFx0XHR0YXJnZXRDaCA9IDA7IC8vIFx1NzlGQlx1NTJBOFx1NTIzMFx1OEJFNVx1ODg0Q1x1NzY4NFx1NUYwMFx1NTkzNFxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXG5cdFx0XHRcdFx0XHRcdFwiT3V0bGluZVNlcnZpY2U6IFx1NTIwNlx1OTY5NFx1N0VCRlx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVx1OEMwM1x1NjU3NFx1NTIzMFx1ODg0QzpcIixcblx0XHRcdFx0XHRcdFx0dGFyZ2V0TGluZVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFx1NjI2N1x1ODg0Q1x1NUJGQ1x1ODIyQVxuXHRcdHRoaXMubmF2aWdhdGVUb1Bvc2l0aW9uKGVkaXRvciwgdGFyZ2V0TGluZSwgdGFyZ2V0Q2gpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgSGVhZGluZ0l0ZW0sIERpdmlkZXJJdGVtLCBQYXJzZWRDb250ZW50IH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBPdXRsaW5lUGFyc2VyIHtcbiAgcHJpdmF0ZSBtYXhDb250ZW50TGVuZ3RoOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IobWF4Q29udGVudExlbmd0aDogbnVtYmVyID0gMTApIHtcbiAgICB0aGlzLm1heENvbnRlbnRMZW5ndGggPSBtYXhDb250ZW50TGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODlFM1x1Njc5MFx1N0IxNFx1OEJCMFx1NTE4NVx1NUJCOVx1RkYwQ1x1NjNEMFx1NTNENlx1NjgwN1x1OTg5OFx1NTQ4Q1x1NTIwNlx1OTY5NFx1N0VCRlx1NEZFMVx1NjA2RlxuICAgKi9cbiAgcGFyc2VDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IFBhcnNlZENvbnRlbnQge1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgaGVhZGluZ3M6IEhlYWRpbmdJdGVtW10gPSBbXTtcbiAgICBjb25zdCBkaXZpZGVyczogRGl2aWRlckl0ZW1bXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuICAgICAgXG4gICAgICAvLyBcdTg5RTNcdTY3OTBcdTY4MDdcdTk4OThcbiAgICAgIGNvbnN0IGhlYWRpbmdNYXRjaCA9IGxpbmUubWF0Y2goL14oI3sxLDZ9KVxccysoLispJC8pO1xuICAgICAgaWYgKGhlYWRpbmdNYXRjaCkge1xuICAgICAgICBjb25zdCBsZXZlbCA9IGhlYWRpbmdNYXRjaFsxXS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gaGVhZGluZ01hdGNoWzJdLnRyaW0oKTtcbiAgICAgICAgaGVhZGluZ3MucHVzaCh7XG4gICAgICAgICAgbGV2ZWwsXG4gICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgbGluZTogaSxcbiAgICAgICAgICBjaDogMFxuICAgICAgICB9KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFx1ODlFM1x1Njc5MFx1NTIwNlx1OTY5NFx1N0VCRlxuICAgICAgaWYgKGxpbmUudHJpbSgpID09PSAnLS0tJykge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5leHRyYWN0RGl2aWRlckNvbnRlbnQobGluZXMsIGkpO1xuICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgIC8vIFx1OEJBMVx1N0I5N1x1NTIwNlx1OTY5NFx1N0VCRlx1NzY4NFx1NUM0Mlx1N0VBN1x1RkYxQVx1NjI3RVx1NTIzMFx1NUY1M1x1NTI0RFx1NTIwNlx1OTY5NFx1N0VCRlx1NEU0Qlx1NTI0RFx1NzY4NFx1NjcwMFx1OEZEMVx1NjgwN1x1OTg5OFx1NUM0Mlx1N0VBN1x1RkYwQ1x1NzEzNlx1NTQwRSsxXG4gICAgICAgICAgY29uc3QgbGV2ZWwgPSB0aGlzLmNhbGN1bGF0ZURpdmlkZXJMZXZlbChsaW5lcywgaSk7XG4gICAgICAgICAgZGl2aWRlcnMucHVzaCh7XG4gICAgICAgICAgICBsaW5lOiBpLFxuICAgICAgICAgICAgY2g6IDAsXG4gICAgICAgICAgICB0aXRsZTogY29udGVudCxcbiAgICAgICAgICAgIGxldmVsIC8vIFx1NkRGQlx1NTJBMFx1NUM0Mlx1N0VBN1x1NEZFMVx1NjA2RlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGhlYWRpbmdzLFxuICAgICAgZGl2aWRlcnMsXG4gICAgICBvdXRsaW5lSXRlbXM6IFtdXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzRDBcdTUzRDZcdTUyMDZcdTk2OTRcdTdFQkZcdTU0MEVcdTc2ODRcdTUxODVcdTVCQjlcbiAgICovXG4gIGV4dHJhY3REaXZpZGVyQ29udGVudChsaW5lczogc3RyaW5nW10sIGRpdmlkZXJJbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAvLyBcdTRFQ0VcdTUyMDZcdTk2OTRcdTdFQkZcdTU0MEVcdTVGMDBcdTU5Q0JcdTY3RTVcdTYyN0VcdTdCMkNcdTRFMDBcdTRFMkFcdTk3NUVcdTdBN0FcdTg4NENcbiAgICBmb3IgKGxldCBpID0gZGl2aWRlckluZGV4ICsgMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xuICAgICAgXG4gICAgICAvLyBcdThERjNcdThGQzdcdTdBN0FcdTg4NENcbiAgICAgIGlmIChsaW5lID09PSAnJykgY29udGludWU7XG4gICAgICBcbiAgICAgIC8vIFx1OERGM1x1OEZDN1x1NTNFNlx1NEUwMFx1NEUyQVx1NTIwNlx1OTY5NFx1N0VCRlxuICAgICAgaWYgKGxpbmUgPT09ICctLS0nKSBicmVhaztcbiAgICAgIFxuICAgICAgLy8gXHU4REYzXHU4RkM3XHU2ODA3XHU5ODk4XHU4ODRDXG4gICAgICBpZiAobGluZS5tYXRjaCgvXiN7MSw2fVxccy8pKSBicmVhaztcbiAgICAgIFxuICAgICAgLy8gXHU2MjdFXHU1MjMwXHU2NzA5XHU2NTQ4XHU1MTg1XHU1QkI5XHVGRjBDXHU2M0QwXHU1M0Q2XHU1MjRETlx1NEUyQVx1NjcwOVx1NjU0OFx1NUI1N1x1N0IyNlxuICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3ROVmFsaWRDaGFycyhsaW5lKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTI0RE5cdTRFMkFcdTY3MDlcdTY1NDhcdTVCNTdcdTdCMjZcbiAgICovXG4gIGdldEZpcnN0TlZhbGlkQ2hhcnModGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTk5OTZcdTVDM0VcdTdBN0FcdTc2N0RcdTVCNTdcdTdCMjZcbiAgICBjb25zdCB0cmltbWVkID0gdGV4dC50cmltKCk7XG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1MTg1XHU1QkI5XHU1QzExXHU0RThFXHU5MTREXHU3RjZFXHU3Njg0XHU1QjU3XHU3QjI2XHU2NTcwXHVGRjBDXHU4RkQ0XHU1NkRFXHU1MTY4XHU5MEU4XG4gICAgaWYgKHRyaW1tZWQubGVuZ3RoIDw9IHRoaXMubWF4Q29udGVudExlbmd0aCkge1xuICAgICAgcmV0dXJuIHRyaW1tZWQ7XG4gICAgfVxuICAgIFxuICAgIC8vIFx1NjNEMFx1NTNENlx1NTI0RE5cdTRFMkFcdTVCNTdcdTdCMjZcbiAgICByZXR1cm4gdHJpbW1lZC5zdWJzdHJpbmcoMCwgdGhpcy5tYXhDb250ZW50TGVuZ3RoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTlBOENcdThCQzFcdTUxODVcdTVCQjlcdTY2MkZcdTU0MjZcdTY3MDlcdTY1NDhcbiAgICovXG4gIGlzVmFsaWRDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBjb250ZW50LnRyaW0oKS5sZW5ndGggPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1OEJBMVx1N0I5N1x1NTIwNlx1OTY5NFx1N0VCRlx1NzY4NFx1NUM0Mlx1N0VBN1xuICAgKiBcdTUyMDZcdTk2OTRcdTdFQkZcdTc2ODRcdTVDNDJcdTdFQTcgPSBcdTY3MDBcdThGRDFcdTY4MDdcdTk4OThcdTc2ODRcdTVDNDJcdTdFQTcgKyAxXG4gICAqIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1NjgwN1x1OTg5OFx1RkYwQ1x1NTIxOVx1NEUzQTFcdTdFQTdcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlRGl2aWRlckxldmVsKGxpbmVzOiBzdHJpbmdbXSwgZGl2aWRlckluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIC8vIFx1NEVDRVx1NTIwNlx1OTY5NFx1N0VCRlx1NTQxMVx1NTI0RFx1NjdFNVx1NjI3RVx1NjcwMFx1OEZEMVx1NzY4NFx1NjgwN1x1OTg5OFxuICAgIGZvciAobGV0IGkgPSBkaXZpZGVySW5kZXggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcbiAgICAgIFxuICAgICAgLy8gXHU4REYzXHU4RkM3XHU3QTdBXHU4ODRDXG4gICAgICBpZiAobGluZSA9PT0gJycpIGNvbnRpbnVlO1xuICAgICAgXG4gICAgICAvLyBcdThERjNcdThGQzdcdTUxNzZcdTRFRDZcdTUyMDZcdTk2OTRcdTdFQkZcbiAgICAgIGlmIChsaW5lID09PSAnLS0tJykgY29udGludWU7XG4gICAgICBcbiAgICAgIC8vIFx1NjI3RVx1NTIzMFx1NjgwN1x1OTg5OFx1RkYwQ1x1OEZENFx1NTZERVx1NTE3Nlx1NUM0Mlx1N0VBNysxXG4gICAgICBjb25zdCBoZWFkaW5nTWF0Y2ggPSBsaW5lLm1hdGNoKC9eKCN7MSw2fSlcXHMrKC4rKSQvKTtcbiAgICAgIGlmIChoZWFkaW5nTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgbGV2ZWwgPSBoZWFkaW5nTWF0Y2hbMV0ubGVuZ3RoO1xuICAgICAgICByZXR1cm4gbGV2ZWwgKyAxO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBcdTY4MDdcdTk4OThcdUZGMENcdTlFRDhcdThCQTRcdTRFM0ExXHU3RUE3XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICAvKipcbiAgICogXHU3NTFGXHU2MjEwXHU1NTJGXHU0RTAwSURcbiAgICovXG4gIGdlbmVyYXRlSWQodHlwZTogc3RyaW5nLCBsaW5lOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0eXBlfS0k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LFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsdUJBQXVCO0FBQzVDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxDQUFDO0FBQUEsSUFDSDtBQUVELFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLG9CQUFvQixFQUM1QjtBQUFBLE1BQ0E7QUFBQSxJQUNELEVBQ0M7QUFBQSxNQUFRLENBQUMsU0FDVCxLQUNFLGVBQWUsSUFBSSxFQUNuQixTQUFTLEtBQUssT0FBTyxTQUFTLGlCQUFpQixTQUFTLENBQUMsRUFDekQsU0FBUyxPQUFPLFVBQVU7QUFDMUIsY0FBTSxXQUFXLFNBQVMsS0FBSyxLQUFLO0FBQ3BDLGFBQUssT0FBTyxTQUFTLG1CQUFtQjtBQUN4QyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQy9CLGFBQUssT0FBTyxvQkFBb0I7QUFBQSxNQUNqQyxDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0Y7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250ZW50IiwgIm5ld0NvbnRlbnQiXQp9Cg==
